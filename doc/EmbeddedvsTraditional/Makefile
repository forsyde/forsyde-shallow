# Generic make file for LaTeX: requires GNU make
#
# This makefile provides four targets: dvi, ps, pdf and clean.
# The default is "pdf".
# To make a dvi file, type "make dvi"
# To make a ps file, type "make ps".
# To make a pdf file, type "make pdf" or simply "make".
# To remove all files generated by make, type "make clean".
#
# Rouben Rostmaian
# September 2002

TEXFILE	= EmbeddedvsTraditional.tex

.PHONY: pdf clean

pdf:	$(TEXFILE:.tex=.pdf)


%.pdf: %.tex
	( \
	\pdflatex $<; \
	while \grep -q "Rerun to get cross-references right." $(<:.tex=.log); \
	do \
		\pdflatex $<; \
	done \
	)
	( \
	if [ -e $(<:.tex=.bib) ] ; then \
		\bibtex $(<:.tex=); \
		\pdflatex $<; \
		while \grep -q "Rerun to get cross-references right." \
		$(<:.tex=.log); \
		do \
			\pdflatex $<; \
		done \
	fi \
	)


clean:
	@\rm -f \
	$(TEXFILE:.tex=.aux) \
	$(TEXFILE:.tex=.log) \
	$(TEXFILE:.tex=.out) \
	$(TEXFILE:.tex=.dvi) \
	$(TEXFILE:.tex=.pdf) \
	$(TEXFILE:.tex=.ps)  \
	$(TEXFILE:.tex=.bbl) \
	$(TEXFILE:.tex=.blg) \
	*~ *\# *-printer.*
